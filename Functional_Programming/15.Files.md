# Files in python

## General information

### What is a file?

A file is a collection of related data or information that is stored in a computer system. It can be a document, a
picture, a program, or any other type of data. Files are typically stored on a hard disk or other storage device, and
can be accessed by the computer's operating system or applications.

### File types

There are two main types of files: text files and binary files. A text file contains human-readable characters and can
be opened and edited with a text editor. Examples of text files include HTML, CSS, and TXT files. A binary file, on the
other hand, contains data in a format that is not easily human-readable. Binary files are used to store images, audio
files, executable programs, and other types of data that require more complex storage formats.

### How File Systems Work in Operating Systems

A file system is a method used by an operating system to store and organize files on a disk. A file system uses a
pointer system to keep track of the location of files on the disk. The file system provides a directory structure that
allows users to organize their files in a hierarchical manner. The file system also provides methods for creating,
deleting, moving, and renaming files. In addition, file systems use file permissions to control who has access to files
and what they can do with them. This helps to ensure that files are secure and that only authorized users can access
them.

## Working with files in python

_We must first open a file before we can read from or write to it. It must be closed once we are finished so that the
resources associated with the file can be released._

_So, a file operation in Python happens in the following order:_

+ Open a file
+ Read, write, append or modify
+ Close the file

### Open Files in Python

To open a file in Python, we use the built-in `open()` function. This function takes two parameters: the file name and
the
mode in which we want to open the file.

The syntax for opening a file in Python is:

```python
file = open("file_name", "mode")
```

The mode parameter specifies the mode in which we want to open the file. The available modes are:

| Mode | Description                                                                                                                       |
|------|-----------------------------------------------------------------------------------------------------------------------------------|
| r    | To read a file, open it. (default)                                                                                                |
| w    | To write, open a file. if the file doesn't already exist, creates a new one; otherwise, truncates the existing one.               |
| a    | Access a file without truncating it so that you can append data to the end of it. if the file does not already exist, creates it. |
| t    | Switch to text mode. (default)                                                                                                    |
| x    | For exclusive creation, open a file. The operation fails if the file already exists.                                              |
| b    | In binary mode, open.                                                                                                             |
| +    | To update a file, open it (reading and writing)                                                                                   |

Once we have finished working with the file, we must close it using the `close()` method.

```python
file.close()
```

It is good practice to close files after we have finished working with them.

### Reading a file

To read a file in Python, we use the `read()` method. This method reads the entire contents of the file and returns it
as a string.

```python
file = open("file_name", "r")
contents = file.read()
print(contents)
file.close()
```

If we want to read the file line by line, we can use the `readline()` method.

```python
file = open("file_name", "r")
line = file.readline()
while line:
    print(line)
    line = file.readline()
file.close()
```

The `readlines()` method can also be used to read all the lines in a file and return them as a list of strings.

```python
file = open("file_name", "r")
lines = file.readlines()
for line in lines:
    print(line)
file.close()
```

### Writing to a file

To write to a file in Python, we use the `write()` method. This method writes the specified string to the file.

```python
file = open("file_name", "w")
file.write("test text.")
file.close()
```

If we want to write multiple lines to a file, we can use the 'writelines()' method.

```python
file = open("file_name", "w")
lines = ["This is line 1.\n", "This is line 2.\n", "This is line 3.\n"]
file.writelines(lines)
file.close()
```

### Appending to a File

To append to a file in Python, we use the `"a"` mode when opening the file.

```python
file = open("file_name", "a")
file.write("test text.")
file.close()
```

### Renaming and Deleting a File

To rename a file in Python, since there is no built-in way to do that in python, we need 'os' library, particularly
the `os.rename()` method.

```python
import os

os.rename("old_file_name", "new_file_name")
```

To delete a file in Python, we use the `os.remove()` method.

```python
import os

os.remove("file_name")
```

### With open

In Python, `with open` is a context manager that provides a way to manage resources, such as file streams, in a more
efficient and safe manner. It is a recommended way to open and work with files in Python. The `with` statement is used
to wrap the execution of a block of code with methods defined by a context manager. In the case of file handling, the
context manager is the `open()` function. When you use `with open`, Python automatically takes care of closing the file
when the block of code inside the with statement finishes executing, even if an exception occurs. This ensures that the
file is properly closed, which is important to avoid file corruption or data loss. The syntax for using with open is as
follows:

```python
with open("file_name", "mode") as file:
# code to work with file goes here
```

The `as` keyword is used to create an alias for the file object, which can then be used inside the block of code. Here
is an example of how to read a file using with open:

```python
with open("file_name", "r") as file:
    contents = file.read()
    print(contents)
```

Once the block of code is executed, the file will be automatically closed, even if an error occurs. This makes
<br/>
`with open` a safe and efficient way to work with files in Python.

### list of methods and functions

- `name` - the name of the file
- `mode` - the mode the file was opened in
- `closed` - whether the file is closed or not
- `read()` - reads the entire contents of the file
- `readline()` - reads a single line from the file
- `readlines()` - reads all the lines of the file and returns them as a list
- `write()` - writes a string to the file
- `writelines()` - writes a list of strings to the file
- `seek()` - changes the position of the file pointer
- `tell()` - returns the current position of the file pointer
- `flush()` - flushes the write buffer of the file
- `truncate()` - truncates the file to a specified size

### File exceptions handling

When working with files in Python, it is important to handle exceptions. The most common exceptions when working with
files are FileNotFoundError, PermissionError, and IOError. To handle file exceptions, you can use a try-except block.
Here is an example of how to handle a FileNotFoundError exception:

```python
try:
    with open("filename.txt", "r") as file:
        contents = file.read()
except FileNotFoundError:
    print("File not found.")
```

### Full/Absolute Paths

When working with files, you can use a full or absolute path to specify the location of the file. An absolute path is
the complete path to a file, starting from the root directory. A full path is the path to a file relative to the current
working directory. To get the current working directory, you can use the os module.

```python
import os

cwd = os.getcwd()
```

## Working with Files of Different Formats

Python provides several libraries for working with files of different formats. Here are some of the most commonly used libraries:

 - CSV - `csv` module
 - JSON - `json` module
 - XML - `xml.etree.ElementTree` module
 - YAML - `pyyaml` module
 - Pickle - `pickle` module

### CSV

Here is an example of how to read a CSV file using the `csv` module:

```python
import csv

with open("file.csv", "r") as file:
    reader = csv.reader(file)
    for row in reader:
        print(row)
```

### JSON

Here is an example of how to read a JSON file using the `json` module:

```python
import json

with open("file.json", "r") as file:
    data = json.load(file)
    print(data)
```

### XML

Here is an example of how to read an XML file using the `xml.etree.ElementTree` module:

```python
import xml.etree.ElementTree as ET

tree = ET.parse("file.xml")
root = tree.getroot()

for child in root:
    print(child.tag, child.attrib)
```

### YAML

Here is an example of how to read a YAML file using the `pyyaml` module:

```python
import yaml

with open("file.yaml", "r") as file:
    data = yaml.load(file, Loader=yaml.FullLoader)
    print(data)
```

### Pickle

Here is an example of how to read and write a Python object to a file using the `pickle` module:

```python
import pickle

# Write a Python object to a file
data = {"key": "value"}
with open("file.pkl", "wb") as file:
    pickle.dump(data, file)

# Read a Python object from a file
with open("file.pkl", "rb") as file:
    data = pickle.load(file)
    print(data)
```